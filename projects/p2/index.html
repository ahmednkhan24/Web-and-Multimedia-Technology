<!DOCTYPE html>
<html>

<head>

	<!-- Bootstrap CDN -->
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

	<!-- CDN for the font used -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

	<!-- Personal CSS -->
	<style type="text/css">

		body
		{
			background-color: #232323;
			color: white;
			font-family: "Montserrat", "Avenir";
		}

		h1
	   	{
	   		text-align: center;
	   		padding-top: 20px;
	   	}

	   	hr
	   	{
	   		background-color: gray;
	   	}
	   	
	   	select
	   	{
	   		height: 250px;
	   		width: 300px;
	   	}

	   	button
	   	{
	   		padding: 10px;
	   		margin: 20px;
	   	}

		.inactiveScreen
		{
	        display: none;
	    }
	   
	   	#map 
	   	{
	   		margin: 20px;
	   		padding: 20px;
        	height: 500px;
        }

        

	</style>

	<title>akhan227 | Project 2</title>

</head>

<body>

	<!-- Home/Instructions Screen -->
	<div id="homeScreen" class="inactiveScreen">
		<!-- nav bar -->
		<nav id="homeNav" class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a class="navbar-brand" href="#">HOME</a>
		  	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
		    	<span class="navbar-toggler-icon"></span>
		  	</button>
		  	<div class="collapse navbar-collapse" id="navbarNav">
			    <ul class="navbar-nav">
			    	<li id="homeLI" class="nav-item active">
			    		<a class="nav-link" href="#">Home<span class="sr-only">(current)</span></a>
				    </li>
				    <li id="searchLI" class="nav-item">
				        <a class="nav-link" href="#">Search</a>
				    </li>
				    <li id="mapLI" class="nav-item">
				    	<a class="nav-link" href="#">Map</a>
				    </li>
			    </ul>
		  	</div>
		</nav>

		<div class="container">
			<div id="homeContent">
				<h1>CPS Information</h1>
				<hr>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
					quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
					consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
					cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
					proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
					quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
					consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
					cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
					proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
				</p>

				<div style="text-align: center">
					<button id="startBtn">Get Started</button>
				</div>

			</div>
		</div>
	
	<!-- close home screen div -->
	</div>






	<!-- Search/Listing Screen-->
	<div id="searchScreen" class="inactiveScreen">
		<!-- nav bar -->
		<nav id="homeNav" class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a class="navbar-brand" href="#">SEARCH</a>
		  	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
		    	<span class="navbar-toggler-icon"></span>
		  	</button>
		  	<div class="collapse navbar-collapse" id="navbarNav">
			    <ul class="navbar-nav">
			    	<li id="homeLI" class="nav-item">
			    		<a class="nav-link" href="#">Home</a>
				    </li>
				    <li id="searchLI" class="nav-item active">
				        <a class="nav-link" href="#">Search<span class="sr-only">(current)</span></a>
				    </li>
				    <li id="mapLI" class="nav-item">
				    	<a class="nav-link" href="#">Map</a>
				    </li>
			    </ul>
		  	</div>
		</nav>


		<div class="container">
			<div class="searchContent">
				<h1>hello world</h1>

				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
					quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
					consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
					cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
					proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
				</p>

				<div id="selection">
					<select id="multiselect" multiple>
					 
					</select>

					<button id="addBtn">Add</button>
					<button id="rmvBtn">Remove</button>
					<button id="clrBtn">Clear All</button>
				</div>

				<div id="display">
					<br>
					<p>Currently Selected School Types:</p>
					<textarea id="txtbox" rows="5" cols="40" readonly></textarea>
					<button id="submitBtn">SUBMIT</button>
				</div>

			</div>
		</div>

	<!-- close search screen div -->
	</div>




	<!-- https://data.cityofchicago.org/resource/76dk-7ieb.json?$select=school_type&$group=school_type -->

	<!-- Map Screen -->
	<div id="mapScreen" class="inactiveScreen">
		<!-- nav bar -->
		<nav id="homeNav" class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a class="navbar-brand" href="#">MAP</a>
		  	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
		    	<span class="navbar-toggler-icon"></span>
		  	</button>
		  	<div class="collapse navbar-collapse" id="navbarNav">
			    <ul class="navbar-nav">
			    	<li id="homeLI" class="nav-item">
			    		<a class="nav-link" href="#">Home</a>
				    </li>
				    <li id="searchLI" class="nav-item">
				        <a class="nav-link" href="#">Search</a>
				    </li>
				    <li id="mapLI" class="nav-item active">
				    	<a class="nav-link" href="#">Map<span class="sr-only">(current)</span></a>
				    </li>
			    </ul>
		  	</div>
		</nav>

		<h1>Hello world</h1>
		<div id="map">
			
		</div>


	<!-- close map screen div -->
	</div>



	<!-- JQuery CDN -->
	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous">     	
    </script>


    <!-- My Script -->
    <script type="text/javascript">
    	// variables to hold the three screens
    	var hScreen = $("#homeScreen");
    	var sScreen = $("#searchScreen");
    	var mScreen = $("#mapScreen");

    	// document ready event handler to show the home screen
    	$(document).ready(
    		function()
	    	{
		    	// show the home screen by removing the 'inactiveScreen' class
	    		$(sScreen).toggleClass("inactiveScreen");
	        });

    	// function will add event handler to the li 'listItem' that will
    	// turn the 'turnoffScreen' to inactive, 
    	// and turn the 'turnonnScreen' to active
    	function addNavActions(turnoffScreen, listItem, turnonScreen)
    	{
    		$(turnoffScreen).find(listItem).click(
    			function()
    			{
		    		$(turnoffScreen).toggleClass("inactiveScreen");
		    		$(turnonScreen).toggleClass("inactiveScreen");
		    	});
    	}

    	// add event handlers to the home screen navbar
    	addNavActions(hScreen, "#searchLI", sScreen);
    	addNavActions(hScreen, "#mapLI", mScreen);

    	// add event handlers to the home 'Get Started' button
    	addNavActions(hScreen, "#startBtn", sScreen);

    	// add event handlers to the search screen navbar
    	addNavActions(sScreen, "#homeLI", hScreen);
    	addNavActions(sScreen, "#mapLI", mScreen);

    	// add event handlers to the map screen navbar
    	addNavActions(mScreen, "#homeLI", hScreen);
    	addNavActions(mScreen, "#searchLI", sScreen);



    	// Search Stuff
    	//-------------------------------------------------------------------------------
    	// add the school type names to the select 
	    $.ajax(
	    {
	    	// the url for requesting school type data from the api
	        url: "https://data.cityofchicago.org/resource/76dk-7ieb.json?$select=school_type&$group=school_type",
	        method: 'GET',
	     }).done(function(response) 
		    {
				$.each(response, function(i, v)
				{
					var option = "<option value=\"" + v.school_type + "\">" + v.school_type + "</option>";

					$("#multiselect").append(option);
				});
		        
		    }).fail(function(err) 
			   {
			   		throw err;
		       });

		// the array that will hold all of the currently selected schools
		var selectedSchools = [];

		// takes the array of strings from 'selectedSchools' and returns it
		// as a single string with newlines
		function createString()
		{
			// the string we will be adding on to
			var arr;

			// loop through the array of strings
			$.each(selectedSchools, function(i, v)
			{
				// for the first time just add the first string
				if (arr === undefined)
				{
					arr = v + "\n";
				}
				// for every other time add the rest 
				else
				{
					arr = arr + v + "\n";
				}
			});

			// return the string
			return arr;
		}


	    // add event handlers to the add button
	    $("#addBtn").click(
	    	function()
	    	{
	    		// get the selected value and turn it to a string
	    		var schoolType = $("#multiselect").val().toString();

	    		// check to see if the selected value is already in the array
	    		if (selectedSchools.indexOf(schoolType) === -1)
	    		{
	    			// if the selected value is not in the array,
	    			// add it to the array and then add it to the text area

	    			selectedSchools.push(schoolType);

	    			$("#txtbox").val(createString());
	    		}
	    	});

	    // add event handlers to the remove button
	    $("#rmvBtn").click(
	    	function()
	    	{
	    		// get the selected value and turn it to a string
	    		var schoolType = $("#multiselect").val().toString();

	    		// find the index if it is in the array
	    		var index = selectedSchools.indexOf(schoolType);
	    		
	    		// if it is in the array, remove it
	    		if (index > -1)
	    		{
	    			// remove the value from the array
	    			selectedSchools.splice(index, 1);

	    			// clear the text area
	    			$("#txtbox").val("");

	    			// refill the text area
	    			$("#txtbox").val(createString());
	    		}

	    	});

	    // add event handlers to the clear button
	    $("#clrBtn").click(
	    	function()
	    	{
	    		// clear the text area
	    		$("#txtbox").val("");

	    		// empty the array
	    		selectedSchools = [];
	    	});


	    // add event handlers to the search 'SUBMIT' button
    	$("#submitBtn").click(
			function()
			{
				// add the functionality to go to the map screen
				$(sScreen).toggleClass("inactiveScreen");
		    	$(mScreen).toggleClass("inactiveScreen");

				getData();
			});
    	//-------------------------------------------------------------------------------




    	// Map Stuff
    	//-------------------------------------------------------------------------------
    	// add the map to the map screen inside the div with id 'map'
    	function initMap() 
    	{
	        var uluru = {lat: 41.8781, lng: -87.6298};
	        var map = new google.maps.Map(document.getElementById("map"), 
	        {
	          zoom: 9,
	          center: uluru
        	});
	    }

	    function createQuery()
	    {
	    	var arr;

	    	if (selectedSchools.length === 0)
	    		return arr;

	    	$.each(selectedSchools, function(i, v)
			{
				// for the first time
				if (arr === undefined)
				{
					arr = "('" + v + "'";
				}
				// every other time
				else
				{
					arr = arr + ",'" + v + "'";
				}
			});

	    	// add the closing parentheses
	    	arr += ")";

			return arr;
	    }

	    function getData()
	    {
	    	var url = "https://data.cityofchicago.org/resource/76dk-7ieb.json?$where=school_type IN ";

	    	var query = createQuery();

	    	if (query === undefined)
	    		return;

	    	url += query;

	    	$.ajax(
		    {
		    	// the url for requesting school type data from the api
		        url: url,
		        method: 'GET',
		     }).done(function(response) 
			    {

					$.each(response, function(i, v)
					{
						console.log(v);
					});
			        
			    }).fail(function(err) 
				   {
				   		throw err;
			       });
	    }



	    function loadData()
	    {

	    }


	    //-------------------------------------------------------------------------------

	    

    
    </script>

    <!-- Google Maps API -->
    <script async defer
    	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD0zHggstjz-FDhr9M8nHdzOxEa_5QCvnY&callback=initMap">
    </script>

</body>

</html>