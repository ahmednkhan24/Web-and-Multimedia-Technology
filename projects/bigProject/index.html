<!DOCTYPE html>
<html>
<head>
	<title>Big Project</title>

	<!-- the MCW stylesheet-->
  	<link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">

	<!-- the material icon font-->
  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<!-- Personal CSS -->
	<style type="text/css">

	  	.hide {
	  		display: none;
	  	}

  		#shrine-header {
  			background-color: #E2E2E2;
  		}

		#shrine-header .mdc-toolbar__section {
			overflow: visible;
		}

		.container {
			text-align: center;
			margin: auto;
			width: 66.6%;
			height: 66.6%;
		}

		.mdc-tab {
			font-size: 25px;
			padding: 15px 50px;
		}

		#busTrainTabBar {
			padding-top: 30px;
			padding-bottom: 40px;
		}

		#logoImg {
			width: 100%;
		}

		.mdc-select {
			margin: 30px;
			width: 30%;
		}

	</style>

</head>

<body class="mdc-typography">

	<!-- tool bar -->
	<header id="shrine-header" class="mdc-toolbar mdc-toolbar--fixed mdc-theme--text-primary-on-background">
		<div class="mdc-toolbar__row">
	    	<section class="mdc-toolbar__section mdc-toolbar__section--align-start">
				<a id="shrine-nav-icon" class="material-icons mdc-ripple-surface"
				   href="#"
				   aria-label="Click to show the navigation menu"
				   aria-controls="shrine-nav-menu"
				   data-mdc-auto-init="MDCRipple"
				   data-mdc-ripple-is-unbounded>menu
				</a>
		    </section>
	  	</div>
	</header>

	<!-- temporary drawer of the tool bar -->
	<aside class="mdc-drawer mdc-drawer--temporary mdc-typography">
		<nav class="mdc-drawer__drawer">
	    	<header class="mdc-drawer__header">
	      		<div class="mdc-drawer__header-content">
	      			<i class="material-icons mdc-list-item__graphic" aria-hidden="true">directions_bus</i>
	      			<i class="material-icons mdc-list-item__graphic" aria-hidden="true">train</i>
	      			<strong>UIC East Campus -- MyTransitApp ------- CTA Version ---------</strong>
	      		</div>	
	    	</header>
	    	<nav id="icon-with-text-demo" class="mdc-drawer__content mdc-list">
	      		<a id="arrivalsNav" class="mdc-list-item mdc-list-item--activated" href="#">
	       			<i class="material-icons mdc-list-item__graphic" aria-hidden="true">alarm</i>Estimated Arrivals
	      		</a>
	      		<a id="nearMeNav" class="mdc-list-item" href="#">
	       			<i class="material-icons mdc-list-item__graphic" aria-hidden="true">person_pin_circle</i>Near Me
	      		</a>
	      		<a id="settingsNav" class="mdc-list-item" href="#">
	        		<i class="material-icons mdc-list-item__graphic" aria-hidden="true">settings</i>Settings
	      		</a>
	    	</nav>
	  	</nav>
	</aside>

	<!-- screen 1 -->
	<div id="arrivalsScreen">
		<br><br><br>
		<!-- UIC Halsted image -->
		<img id="logoImg" src="imgs/halsted.jpg">
		<div class="container">
			

			<!-- bus/train tab bar  -->
			<div id="busTrainTabBar">
				<nav id="basic-tab-bar" class="mdc-tab-bar">
					<a id="busNav" class="mdc-tab mdc-tab--active" href="#">Bus</a>
					<a id="trainNav" class="mdc-tab" href="#">Train</a>
					<span class="mdc-tab-bar__indicator"></span>
				</nav>
			</div>

			<div id="busTab">

				<!-- bus route drop down select menu -->
				<div id="busRoute" class="mdc-select">
					<select id="busRouteSelect" class="mdc-select__native-control">
						<option value="" disabled selected></option>
						<option value="seven">7 - Harrison</option>
						<option value="eight">8 - Halsted</option>
						<option value="twelve">12 - Roosevelt</option>
						<option value="sixty">60 - Blue Island/26th</option>
						<option value="one-fifty-seven">157 - Streeterville/Taylor</option>
					</select>
					<div class="mdc-select__label">Select Route</div>
					<div class="mdc-select__bottom-line"></div>
				</div>

				<br>

				<!-- bus direction drop down select menu -->
				<div id="busDirection" class="mdc-select">
					<select id="busDirectionSelect" class="mdc-select__native-control">
						<option value="" disabled selected></option>
						<option id="north" class="hide" value="Northbound">Northbound</option>
						<option id="south" class="hide" value="Southbound">Southbound</option>
						<option id="east" class="hide" value="Eastbound">Eastbound</option>
						<option id="west" class="hide" value="Westbound">Westbound</option>
					</select>
					<div class="mdc-select__label">Select Direction</div>
					<div class="mdc-select__bottom-line"></div>
				</div>


			</div>
			
			<div id="trainTab" class="hide">
				<h1>hello world</h1>
				
			</div>

		</div>â€‹
	</div>





	<!-- screen 2 -->
	<div id="nearMeScreen" class="hide">
		<br><br>

		<div class="container">
			<h1>Near Me Screen</h1>
		</div>
		


	</div>


	<!-- screen 3 -->
	<div id="settingsScreen" class="hide">
		<br><br>

		<div class="container">
			<h1>Settings Screen</h1>
		</div>
		
	</div>






	<!-- MCW Script -->
	<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.js"></script>

	<!-- JQuery CDN -->
	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous">	
	</script>

    <!-- Personal JavaScript -->
    <script type="text/javascript">

	   	$(document).ready(function(){
	   		console.log("Document Ready");
	   	});

	   	// Script for temporary drawer for the tool bar
	   	let drawer = new mdc.drawer.MDCTemporaryDrawer(document.querySelector('.mdc-drawer--temporary'));
		document.querySelector('#shrine-nav-icon').addEventListener('click', () => drawer.open = true);

		// Script for the bus route drop down select menu
		const busRouteSelect = new mdc.select.MDCSelect(document.querySelector("#busRoute"));

		// Script for the bus direction drop down select menu
		const busDirectionSelect = new mdc.select.MDCSelect(document.querySelector("#busDirection"));

	   	/**********************************************************************************************
		*
		* adding action listeners to the tool bar items and the arrival screen's tab bar items
		* 
	   	**********************************************************************************************/

	   	// add action listeners to the 'arrivals', 'near me', and 'settings' navigation items in the nav bar
		navListener("#arrivalsNav", "#arrivalsScreen", "#nearMeNav", "#nearMeScreen", "#settingsNav", "#settingsScreen");
		navListener("#nearMeNav", "#nearMeScreen", "#arrivalsNav", "#arrivalsScreen", "#settingsNav", "#settingsScreen");
		navListener("#settingsNav", "#settingsScreen", "#arrivalsNav", "#arrivalsScreen", "#nearMeNav", "#nearMeScreen");

		function navListener(mainNav, mainScreen, nav2, screen2, nav3, screen3)
		{
			$(mainNav).click(function(){
				$(mainNav).addClass("mdc-list-item--activated");
				$(nav2).removeClass("mdc-list-item--activated");
				$(nav3).removeClass("mdc-list-item--activated");

				$(mainScreen).removeClass("hide");
				$(screen2).addClass("hide");
				$(screen3).addClass("hide");

				drawer.open = false;
			});
		}

	   	// add action listeners to the 'home' and 'train' tab in the 'arrivals' screen
	   	tabListener("#busNav", "#busTab", "#trainNav", "#trainTab");
	   	tabListener("#trainNav", "#trainTab", "#busNav", "#busTab");

	   	function tabListener(mainNav, mainTab, otherNav, otherTab)
		{
			$(mainNav).click(function(){
		   		$(mainNav).addClass("mdc-tab--active");
		   		$(otherNav).removeClass("mdc-tab--active");

		   		$(mainTab).removeClass("hide");
		   		$(otherTab).addClass("hide");
		   	});
		}

		/**********************************************************************************************
		*
		* adding action listeners to the drop down select menus on the arrivals screen
		* 
	   	**********************************************************************************************/

	   	// add action listener for a change to the first drop down menu on the arrivals screen - bus tab
	   	$("#busRoute").change(function(){
			console.log("Bus Route Changed");

			// grab the selected route that was clicked
			var busRouteSelect = document.getElementById("busRouteSelect");
			var clickedValue = busRouteSelect.options[busRouteSelect.selectedIndex].value;

			// change the direction value options depending on what route was chosen
			// the eight bus is the only one that has North/South options
			// the rest only have East/West options
			if (clickedValue === "eight") {
				$("#north").removeClass("hide");
				$("#south").removeClass("hide");
				$("#east").addClass("hide");
				$("#west").addClass("hide");
			}
			else {
				$("#east").removeClass("hide");
				$("#west").removeClass("hide");
				$("#north").addClass("hide");
				$("#south").addClass("hide");
			}

			// make sure to pre-select the first empty value of the direction select
			// every single time the route is changed in order to prevent incorrect 
			// direction being handled with the wrong route
			$("#busDirectionSelect").prop("selectedIndex",0);
		});

	   	// add action listener for a change to the second drop down menu on the arrivals screen - bus tab
		$("#busDirection").change(function(){
			console.log("change direction");
		});




		// AJAX stuff
		proxy = "https://polar-garden-75406.herokuapp.com/apiPassThru.php?apiEndpoint=";

		eightBusSouthURL = "http://ctabustracker.com/bustime/api/v2/getstops&key=ARXsvPdwAMNqNgnbMuyVreNbq&rt=8&dir=Southbound&format=json";
		eightBusNorthURL = "http://ctabustracker.com/bustime/api/v2/getstops&key=ARXsvPdwAMNqNgnbMuyVreNbq&rt=8&dir=Northbound&format=json";

		$.ajax(
	    {
	    	// the url for requesting school type data from the api
	        url: proxy += eightBusSouthURL,
	        method: 'GET',
	     }).done(function(response) 
		    {
		    	console.log(response);

				// $.each(response, function(i, v)
				// {
				// 	console.log(i + ", " + v);
				// });
		        
		    }).fail(function(err) 
			   {
			   		throw err;
		       });

		



    </script>
</body>
</html>